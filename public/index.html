<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Multistream Dashboard</title>
  <link rel="stylesheet" href="css/main.css">
  <script src="https://cdn.jsdelivr.net/npm/flv.js@1.6.2/dist/flv.min.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/dashboard.js"></script>
</head>

<body>
  <!-- The layout is handled by js/ui.js wrapper usually, but because logic might run before load, we can structure it correct immediately or let ui.js handle it. 
         Ideally, we write the structure directly here for better perceived performance and SEO (though it's an app).
         However, UI.js injects it. Let's stick to the current plan where UI.js wraps the body content. 
         But to be safe and clean, I will write the FULL structure here so we don't rely on JS injection for the layout if possible, 
         OR I will stick to the plan. 
         
         My UI.js replaces body content. Let's make index.html contain the "Main Content" part only, as per my UI.js logic.
    -->

  <div class="flex justify-between items-center mb-4">
    <div>
      <h1>Dashboard</h1>
      <p class="text-secondary text-sm">Monitor and control your streams</p>
    </div>
    <div class="flex gap-2">
      <button id="reloadButton" class="btn btn-secondary" onclick="reloadConfig()">
        <span>ðŸ”„</span> Reload Config
      </button>
      <span id="reloadStatus" class="reload-status"></span>
    </div>
  </div>

  <!-- Platform Status -->
  <div class="card mb-4">
    <h2>Platform Status</h2>
    <div id="platforms">Loading platform status...</div>
  </div>

  <!-- Layout Grid for Player and Info -->
  <div class="flex flex-col gap-4">

    <!-- Debug Player -->
    <div class="card">
      <div class="flex justify-between items-center mb-4">
        <h2>Debug Player</h2>
        <div class="player-controls">
          <label class="toggle-switch">
            <input type="checkbox" id="playerToggle" onchange="togglePlayer(this.checked)">
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>

      <div id="playerStatusText" class="text-secondary text-center p-4 bg-surface-hover rounded">
        Player is disabled to save resources
      </div>

      <div id="playerContainer" style="display: none;">
        <div id="streamStatus" class="stream-status stream-inactive mb-4">Stream Not Active</div>
        <div class="video-container" id="videoWrapper">
          <video id="videoPlayer" controls></video>
        </div>
        <p class="text-sm text-secondary mt-2">
          The debug stream will appear here when browser_debug platform is enabled and a stream is active.
        </p>
      </div>
    </div>


  </div>
</body>

</html>